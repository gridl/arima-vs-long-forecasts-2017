<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>ARIMA vs. long term forecasts</title>

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/white-helv.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/github-gist.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>ARIMA vs. long term forecasts</h1>
                    <p>
                        &copy; 2017 Anton Lebedevich
                    </p>
                </section>
                
                <section>
                    <h2>Anton Lebedevich:</h2>
                    <ul>
                        <li>data science engineer</li>
                        <li>solves distributed performance issues</li>
                        <li>loves time series and anomalies</li>
                        <li>blogs at <a href="http://mabrek.github.io">mabrek.github.io</a>
                    </ul>
                </section>

                <section>
                    <blockquote>A time series is a collection of observations made sequentially in time.</blockquote>
                </section>

                <section>
                    <h2>Forecasting Task (daily)</h2>
                    <img class="stretch" src="img/daily1.svg"/>
                </section>
                
                <section>
                    <h2>Forecasting Task (daily)</h2>
                    <img class="stretch" src="img/daily2.svg"/>
                </section>

                <section>
                    <h2>Forecasting Task (half-hourly)</h2>
                    <img class="stretch" src="img/half-hourly.svg"/>
                </section>

                <section>
                    <h2>Forecasting Challenges</h2>
                    <ul>
                        <li>multi-step ahead</li>
                        <li>many seasons (year, month, week, day)</li>
                        <li>external predictors (weather, promo)</li>
                        <li>data gaps</li>
                        <li>outliers, changepoints</li>
                        <li>holidays (zero values)</li>
                        <li>irregular (sometimes)</li>
                        <li>short train</li>
                    </ul>
                </section>

                <section>
                    <h2>SARIMA</h2>
                    <p>$$ \phi_p (L) \tilde \phi_P (L^s) \Delta^d \Delta_s^D y_t = A(t) + \theta_q (L) \tilde \theta_Q (L^s) \zeta_t $$</p>
                </section>               

                <section>
                    <h2>SARIMA</h2>
                    <p>$$ \phi_p (L) \tilde \phi_P (L^s) \Delta^d \Delta_s^D y_t = A(t) + \theta_q (L) \tilde \theta_Q (L^s) \zeta_t $$</p>
                    <img class="stretch" src="img/Jackie-Chan-WTF.jpg"/>
                </section>               

                <section>
                    <h2>ARIMA (simple form)</h2>
                    <p>$$ y'_{t} = c + \phi_{1}y'_{t-1} + \cdots + \phi_{p}y'_{t-p} \\
                        + \theta_{1}e_{t-1} + \cdots + \theta_{q}e_{t-q} + e_{t} $$</p>
                    <img class="stretch" src="img/feels-good.png"/>
                </section>

                <section>
                    <h2>Dirac Delta Function</h2>
                    <p>used to measure impulse response</p>
                    <img class="stretch" src="img/dirac-delta.svg"/>
                </section>

                <section>
                    <h2>AR(1) Impulse Response</h2>
                    <p>$$ y_{t} = 0.9y_{t-1} + e_{t} $$</p>
                    <img class="stretch" src="img/ar_1.svg"/>
                </section>

                <section>
                    <h2>AR(2) Impulse Response</h2>
                    <p>$$ y_{t} = 0.3y_{t-1} + 0.3y_{t-2} + e_{t} $$</p>
                    <img class="stretch" src="img/ar_2_1.svg"/>
                </section>

                <section>
                    <h2>AR(2) Impulse Response</h2>
                    <p>$$ y_{t} = 0.9y_{t-1} - 0.85y_{t-2} + e_{t} $$</p>
                    <img class="stretch" src="img/ar_2_2.svg"/>
                </section>

                <section>
                    <h2>AR(2) Impulse Response</h2>
                    <p>$$ y_{t} = 0.08y_{t-1} + 0.9y_{t-2} + e_{t} $$</p>
                    <img class="stretch" src="img/ar_2_3.svg"/>
                </section>

                <section>
                    <h2>I(0) Process (White Noise)</h2>
                    TODO formula
                    <img class="stretch" src="img/i_0.svg"/>
                </section>

                <section>
                    <h2>I(1) Process (Random Walk)</h2>
                    <img class="stretch" src="img/i_1.svg"/>
                </section>

                <section>
                    <h2>I(2) Process</h2>
                    <img class="stretch" src="img/i_2.svg"/>
                </section>


                <section>
                    <h2>Weekly Pattern + Noise</h2>
                    <img class="stretch" src="img/weekly_noise.svg"/>
                </section>

                <section>
                    <h2>auto.arima</h2>
                    <img class="stretch" src="img/arima_auto.svg"/>
                </section>

                <section>
                    <img class="stretch" src="img/autoarima-success-rates.svg"/>
                    <a href="http://ellisp.github.io/blog/2015/09/30/autoarima-success-rates">ellisp.github.io/blog/2015/09/30/autoarima-success-rates</a>
                </section>

                <section>
                    <h2>ARIMA(7, 0, 0)</h2>
                    <img class="stretch" src="img/arima_7.svg"/>
                </section>

                <section>
                    <h2>SARIMAX Challenges</h2>
                    <div style="text-align: left; margin-left: 40px;">
                        <p>(&divide;) multi-step ahead</p>
                        <p>(&divide;) many seasons (year, month, week, day)</p>
                        <p>(+) external predictors (weather, promo)</p>
                        <p>(-) data gaps</p>
                        <p>(&divide;) outliers, changepoints</p>
                        <p>(-) holidays (zero values)</p>
                        <p>(-) irregular (sometimes)</p>
                        <p>(&divide;) short train</p>
                    </div>
                </section>

                <section>
                    <h2>What to Do Instead</h2>
                    <ul>
                        <li>naive seasonal</li>
                        <li>linear (with lots of feature engineering, lags)</li>
                        <li>trees (XGBoost, etc..)</li>
                        <li>assembles</li>
                        <li>neural networks TODO deep emoji</li>
                        <li>bayesian</li>
                        <li>multiple output</li>
                        <li>&hellip;</li>
                </section>

                <section>
                    <h2>Out-of-sample Extrapolation</h2>
                    <img class="stretch" src="img/extrapolation.svg"/>
                    TODO image size
                    <p><a href="http://ellisp.github.io/blog/2016/12/10/extrapolation">ellisp.github.io/blog/2016/12/10/extrapolation</a></p>
                </section>

                <section>
                    <h2>NN doesn't Extrapolate Too</h2>
                    <img class="stretch" src="img/nn-extrapolation.png"/>
                    <p><a href="http://kourentzes.com/forecasting/2016/12/28/can-neural-networks-predict-trended-time-series/">http://kourentzes.com/forecasting/2016/12/28/can-neural-networks-predict-trended-time-series/</a></p>
                </section>

                <section>
                    <h2>Unit Root or Trend Stationary</h2>
                    <img class="stretch" src="img/Unit_root_hypothesis_diagram.svg"/>
                    don't difference blindly
                    <a href="https://en.wikipedia.org/wiki/Unit_root">en.wikipedia.org/wiki/Unit_root</a>
                </section>

                <section>
                    <h2>Competitions</h2>
                    <ul>
                        <li><a href="http://blog.drhongtao.com/2016/04/probabilistic-energy-forecasting-gefcom2014-papers-and-more.html">Probabilistic energy forecasting Gefcom2014</a></li>
                        <li><a href="https://www.kaggle.com/c/rossmann-store-sales">Kaggle Rossmann store sales</a></li>
                        <li><a href="https://www.kaggle.com/c/grupo-bimbo-inventory-demand/">Kaggle Grupo Bimbo inventory demand</a></li>
                        <li>&hellip;</li>
                    </ul>
                </section>
                
                <section>
                    <h2>TODO</h2>
                    <pre>
    space state models don't like that too
    detrending vs. mean shift
    detrending vs. differencing (stochastic vs. determenistic trend)
        trend stationary vs. unit root
        http://hedibert.org/wp-content/uploads/2015/04/DT-or-ST.pdf
    http://fedc.wiwi.hu-berlin.de/xplore/tutorials/sfehtmlnode63.html
    decomposition (stl, str)
        A Seasonal-Trend Decomposition Procedure Based on Regression.pdf
        additive or multiplicative?
        bayesian decomposition
    http://thuijskens.github.io/2016/08/03/time-series-forecasting/
        ARIMA converges
        MCMC is slow
    6313-bayesian-intermittent-demand-forecasting-for-large-inventories.pdf
    regularization
    seasonal arima needs many seasons
    https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average
    https://en.wikipedia.org/wiki/Autoregressive_model
    AR(x) unit root
    periodic arima processes
        it's better to do periodogram and add periodic feature?
        complex root example from http://www.stat.pitt.edu/stoffer/tsa4/R_toot.htm
    shumway stoffer
                    </pre>
                </section>
                <section>
                    <h2>Summary</h2>
                    <ul>
                        <li>TODO</li>
                    </ul>
                </section>
                
                <section>
                    <h2>Links</h2>
                    https://www.otexts.org/fpp
                    <p><a href="http://robjhyndman.com/hyndsight/longseasonality/">robjhyndman.com/hyndsight/longseasonality/</a></p>
                        http://multithreaded.stitchfix.com/blog/2016/04/21/forget-arima/
    https://github.com/facebookincubator/prophet
                        <p><a href="http://blog.drhongtao.com/2016/04/probabilistic-energy-forecasting-gefcom2014-papers-and-more.html">blog.drhongtao.com/2016/04/probabilistic-energy-forecasting-gefcom2014-papers-and-more.html</a></p>

                    <p>TODO</p>
                </section>
                
                <section>
                    <h2>Q&amp;A</h2>
                    <p>
                    <p>Anton Lebedevich</p>
                    <p>mabrek@gmail.com</p>
                    TODO twitter logo<p><a href="https://twitter.com/widdoc">@widdoc</a></p>
                    <p><a href="http://mabrek.github.io">mabrek.github.io</a></p>
                    <p><a href="http://mabrek.github.io/arima-vs-long-forecasts-2017">mabrek.github.io/arima-vs-long-forecasts-2017</a></p>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({
                controls: false,
                progress: false,
                history: true,
                center: true,
                slideNumber: 'c/t',
                transition: 'none',
                width: 960,
                height: 700,
                showNotes: false, // TODO set to true after presentation
                math: {
                    mathjax: 'MathJax-2.7.1/MathJax.js',
                    config: 'TeX-AMS_HTML-full'
                },
                dependencies: [
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/math/math.js', async: true }
                ]
            });
        </script>
    </body>
</html>
